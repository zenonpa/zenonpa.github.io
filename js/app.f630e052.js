(function(t){function e(e){for(var o,i,r=e[0],c=e[1],l=e[2],d=0,f=[];d<r.length;d++)i=r[d],s[i]&&f.push(s[i][0]),s[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],o=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(o=!1)}o&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},s={app:0},n=[];function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"263e":function(t,e,a){t.exports=a.p+"img/vendemas.57f3c716.png"},"2a7e":function(t,e,a){},"3ee6":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("ac6a"),a("6b54"),a("cadf"),a("551c"),a("097d");var o=a("2b0e"),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.$root.$data.mostrar,expression:"$root.$data.mostrar"}],attrs:{id:"app0"}},[o("Cabecera",{ref:"cabecera"}),o("div",{staticClass:"vApp"},[t.autorizado?o("div",{staticClass:"txtPerfil"},[o("span",[t._v("AGENCIA: "),o("strong",[t._v(" "+t._s(t.$codAgencia)+" - "+t._s(t.$nomAgencia))])]),o("br"),o("span",[t._v("PERFIL: "),o("strong",[t._v(" "+t._s(t.$nomPerfil)+" ")])]),o("br"),o("span",[t._v("STOCK: "),o("strong",[t._v(" "+t._s(t.$root.$data.sstock)+"       ")])])]):t._e(),t.autorizado?o("div",{staticClass:"userConectado"},[o("img",{staticClass:"userPhoto",attrs:{src:this.conectadoPhoto}}),o("strong",{staticClass:"userName"},[t._v(" "+t._s(t.conectado)+" ")])]):t._e()]),t.autorizado?o("div",{staticClass:"vForm"},[o("div",{staticClass:"vSubMenu"},[o("img",{staticClass:"vendemasImg",attrs:{src:a("263e")}}),t.bPrincipal?o("span",[t._v(" ")]):t._e(),t.bPrincipal?o("router-link",{staticClass:"vSubItem",attrs:{to:"/",exact:""}},[t._v("Principal")]):t._e(),t.bAfiliacion?o("span",[t._v(" ")]):t._e(),t.bAfiliacion?o("router-link",{staticClass:"vSubItem",attrs:{to:"/Afiliacion",exact:""}},[t._v("Registro de POS")]):t._e(),t.bConsultas?o("span",[t._v(" ")]):t._e(),t.bConsultas?o("router-link",{staticClass:"vSubItem",attrs:{to:"/Consultas",exact:""}},[t._v("Consultas")]):t._e(),t.bInventario?o("span",[t._v(" ")]):t._e(),t.bInventario?o("router-link",{staticClass:"vSubItem",attrs:{db:this.db,to:"/Pos",exact:""}},[t._v("Inventario de POS")]):t._e(),t._e(),t._e()],1),o("router-view",[t._v("esperando...")])],1):o("div",[o("div",{staticClass:"vAppNoConectado"},[o("img",{staticClass:"vendemasImgNone",attrs:{src:a("263e")}}),o("span",{staticClass:"vendemasInfo",on:{click:function(e){t.showModal=!0}}},[t._v(" Mas info ")]),t.showModal?o("modal",{on:{close:function(e){t.showModal=!1}}},[o("h3",{attrs:{slot:"header"},slot:"header"},[t._v("VendeMAS")]),o("div",{staticClass:"bodyModalPopup",attrs:{slot:"body"},slot:"body"},[o("p",[t._v("Vendemas es una plataforma de procesamiento de pagos por tarjeta de crédito y débito")]),o("p",[t._v("\n          Tarifas:\n              Costo de equipo: PEN  169.00\n          ")]),o("article",[t._v("\n          Procedimiento:"),o("br"),t._v("\n          1. Acercarse a ventanilla y solicitar la operación VENDEMAS-POS. Cancelar PEN 169.00 "),o("br"),t._v("\n          2. Con el voucher del pago, acercarse al promotor de VENDEMAS para su afiliación.\n          ")])]),o("h3",{attrs:{slot:"footer"},slot:"footer"})]):t._e(),t.autorizado?t._e():o("h2",{staticClass:"txtMensaje"},[t._v(t._s(t.infoNoConectado))])],1)]),o("Piepagina")],1)},n=[],i=(a("a481"),a("28a5"),a("59ca")),r=a.n(i),c=(a("e71f"),a("66ce"),a("ea7b"),{apiKey:"AIzaSyAZIwxTNvpHVvwkJ4o2JKS2SpYHOLBeZsg",authDomain:"vende-mas.firebaseapp.com",databaseURL:"https://vende-mas.firebaseio.com",projectId:"vende-mas",storageBucket:"vende-mas.appspot.com",messagingSenderId:"699209203300"}),l=r.a.initializeApp(c),u=l,d=a("bc3a"),f=a.n(d),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vHeader"},[t.autorizado?a("Counter",{ref:"counterComp",attrs:{deadline:t.$root.$data.sSesion}}):t._e(),t._m(0),t.autorizado?a("div",[a("button",{staticClass:"logoutBtn",on:{click:t.logout}},[t._v("Cerrar Sesión")])]):a("div",[a("button",{staticClass:"loginBtn",on:{click:t.signIn}},[t._v("Iniciar Sesión")])])],1)},h=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("img",{staticClass:"cdkImg",attrs:{src:a("5fbe")}})])}],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"vuejs-countdown"},[a("li",[a("p",{staticClass:"digit"},[t._v(t._s(t._f("twoDigits")(t.minutes)))])]),a("li",[a("p",{staticClass:"digit"},[t._v(t._s(t._f("twoDigits")(t.seconds)))])])])},v=[],g=(a("84b4"),a("c5f6"),null),b={name:"Counter",props:{deadline:{type:String},end:{type:String},stop:{type:Boolean},diferencia:{type:Number}},data:function(){return{now:Math.trunc((new Date).getTime()/1e3),date:null,diff:0,temp:0,deadline1:"2099-08-31"}},mounted:function(){this.setHora()},created:function(){var t=this;if(!this.deadline&&!this.end)throw new Error("Missing props 'deadline' or 'end'");var e=this.deadline?this.deadline:this.end;if(this.date=Math.trunc(Date.parse(e.replace(/-/g,"/"))/1e3),!this.date)throw new Error("Invalid props value, correct the 'deadline' or 'end'");g=setInterval(function(){t.now=Math.trunc((new Date).getTime()/1e3)},1e3)},computed:{seconds:function(){return Math.trunc(this.diff)%60},minutes:function(){return Math.trunc(this.diff/60)%60},hours:function(){return Math.trunc(this.diff/60/60)%24},days:function(){return Math.trunc(this.diff/60/60/24)}},watch:{now:function(){this.diff=this.date-this.now,(this.diff<=0||this.stop)&&(this.diff=0,this.cerrarSesion(),clearInterval(g))}},filters:{twoDigits:function(t){return t.toString().length<=1?"0"+t.toString():t.toString()}},methods:{setHora:function(){var t=new Date,e=new Date(t.getTime()+6e4*this.$root.$ls.get("timeout")),a=e.getFullYear(),o=e.getMonth(),s=o+1,n=e.getDate(),i=e.getHours(),r=e.getMinutes(),c=e.getSeconds();this.temp=a.toString()+(s<10?"-0":"-")+s+(n<10?"-0":"-")+n,this.temp+=(i<10?" 0":" ")+i,this.temp+=(r<10?":0":":")+r,this.temp+=(c<10?":0":":")+c,this.deadline1=this.temp,this.date=Math.trunc(Date.parse(this.deadline1.replace(/-/g,"/"))/1e3)},cerrarSesion:function(){this.$parent.logout()}},destroyed:function(){clearInterval(g)}},_=b,C=(a("e141"),a("2877")),$=Object(C["a"])(_,m,v,!1,null,null,null);$.options.__file="Counter.vue";var P=$.exports,S=new r.a.auth.GoogleAuthProvider;S.setCustomParameters({login_hint:"user@gmail.com"});var y={components:{Counter:P},name:"Cabecera",data:function(){return{movil:!0,msg:"VendeMAS"}},computed:{deadline1:function(){return this.$root.$data.sSesion},isMobile:function(){return!0},autorizado:function(){return this.$store.state.auth}},methods:{signIn:function(){r.a.auth().signInWithPopup(S).catch()},logout:function(){var t=this,e=this;r.a.auth().signOut().then(function(){t.$parent.bPrincipal=!1,t.$parent.bAfiliacion=!1,t.$parent.bConsultas=!1,t.$parent.bInventario=!1,e.$refs.counterComp.setHora(),t.$router.replace("login")})},myMethod:function(){this.$refs.counterComp.setHora()}}},w=y,I=(a("6674"),Object(C["a"])(w,p,h,!1,null,"f0981a56",null));I.options.__file="Header.vue";var A=I.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vFormConsultas"},[a("div",{staticClass:"vPOS"},[a("form",{staticClass:"formPOS",on:{submit:function(e){e.preventDefault(),t.Agregar()}}},[a("fieldset",[a("legend",[t._v("Elija el tipo de consulta")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.consulta,expression:"consulta"}],attrs:{type:"radio",value:"dni",id:"dni",checked:""},domProps:{checked:t._q(t.consulta,"dni")},on:{change:[function(e){t.consulta="dni"},function(e){t.cambia0()}]}}),a("label",{attrs:{for:"dni"}},[t._v(" DNI")])]),a("div",{staticClass:"col-md-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.consulta,expression:"consulta"}],attrs:{type:"radio",value:"voucher",id:"voucher"},domProps:{checked:t._q(t.consulta,"voucher")},on:{change:[function(e){t.consulta="voucher"},function(e){t.cambia0()}]}}),a("label",{attrs:{for:"voucher"}},[t._v(" POS")])]),"dni"===t.consulta?a("div",[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dni,expression:"dni"}],ref:"serial",staticClass:"form-control serialPOS",attrs:{maxlength:"8",placeholder:"Número DNI",type:"text"},domProps:{value:t.dni},on:{keydown:t.validaNum2,keypress:t.validaNum,input:function(e){e.target.composing||(t.dni=e.target.value)}}})])]):t._e(),"voucher"===t.consulta?a("div",[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.arrPos.agencia,expression:"arrPos.agencia"}],staticClass:"form-control selectvoucher",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.arrPos,"agencia",e.target.multiple?a:a[0])},function(e){t.cargarPOS(t.arrPos.agencia)}]}},[a("option",{attrs:{selected:"",value:"000"}},[t._v("Elija la agencia")]),t._l(t.Agencias,function(e){return a("option",{key:e.nom_ofi,domProps:{value:e.cod_ofi},on:{change:function(e){t.cambia0()}}},[t._v(t._s(e.cod_ofi)+" - "+t._s(e.nom_ofi)+"\n                           ")])})],2)])]):t._e()])]),a("input",{staticClass:"btn btn-success",attrs:{type:"submit",value:"Buscar"}})]),t.showModal?a("modal",{on:{close:function(e){t.showModal=!1}}},[a("h3",{attrs:{slot:"header"},slot:"header"},[t._v("Validación en Consultas")]),a("div",{staticClass:"bodyModalPopup",attrs:{slot:"body"},slot:"body"},[a("h2",[t._v("DNI")]),a("article",[t._v("\n               El cliente no tiene cuentas de ahorro (700 - Ahorro Soles) para afiliar a   l sistema\n           ")])]),a("h3",{attrs:{slot:"footer"},slot:"footer"})]):t._e(),a("div",{staticClass:"card listaTabla"},[a("div",{staticClass:"card-header"},["dni"===t.consulta?a("h3",{staticClass:"card-title"},[t._v("Listado de DNI")]):t._e(),"voucher"===t.consulta?a("h3",{staticClass:"card-title"},[t._v("Listado de POS por Agencia")]):t._e()]),a("div",{staticClass:"card-body"},[a("table",{staticClass:"table table-strip"},[a("thead",["dni"===t.consulta?a("tr",[a("th",[t._v("DNI")]),a("th",[t._v("Nombres")]),a("th",[t._v("Cuentas")])]):t._e(),"voucher"===t.consulta?a("tr",[a("th",[t._v("Serie")]),a("th",[t._v("Agencia")]),a("th",[t._v("Fecha")])]):t._e()]),a("tbody",t._l(t.lista,function(e,o,s){return a("tr",{key:s,attrs:{index:o}},[a("td",[t._v("\n                           "+t._s(e.dni)+"\n                       ")]),a("td",[t._v("\n                           "+t._s(e.nombres)+"\n                       ")]),a("td",[t._v("\n                           "+t._s(e.cuenta)+"\n                       ")])])}))])])])],1)])},N=[],E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n            default header\n          ")])],2),a("div",{staticClass:"modal-body"},[t._t("body",[t._v("\n            default body\n          ")])],2),a("div",{staticClass:"modal-footer"},[t._t("footer",[t._v("\n            default footer\n          ")]),a("button",{staticClass:"modal-default-button btnCerrar",on:{click:function(e){t.$emit("close")}}},[t._v("\n              Cerrar\n            ")])],2)])])])])},O=[],D={name:"modal",data:function(){return{showModal:!0}}},x=D,M=(a("e791"),Object(C["a"])(x,E,O,!1,null,"39a8d70a",null));M.options.__file="modal.vue";var T=M.exports,j=u.firestore(),V={timestampsInSnapshots:!0};j.settings(V);var z=j.collection("agencias"),R=j.collection("pos"),B={components:{modal:T},name:"Pos",todo:"",firestore:{lstAgencias:z,lstPos11:R},mounted:function(){var t=this;u.firestore().collection("agencias").where("estado","==",!0).get().then(function(e){var a=[];e.forEach(function(t){a.push(t.data())}),t.Agencias=a}).catch()},data:function(){return{consulta:"dni",showModal:!1,lista:[],dni:"",arrPos:{dni:"",nombres:"",cuenta:"",cliente:"",fecha:"",estado:""},Agencias:[],listado02:R,lstAgencias:z}},methods:{cambia0:function(){this.lista=[]},validaNum2:function(t){var e=t.keyCode||t.charCode;if(190!=e&&222!=e||(t.preventDefault(!0),t.stopPropagation(!0),t.stopped=!0),!t.defaultPrevented){var a=!1;void 0!==t.key||void 0!==t.keyIdentifier||t.keyCode,a&&t.preventDefault()}},validaNum:function(t){var e=t.keyCode||t.charCode;switch(e){case 46:case 13:case 8:case 35:case 36:case 37:case 38:case 39:case 40:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:break;default:t.preventDefault(),t.stopPropagation(),t.stopped=!0;break}},cargarPOS:function(t){var e=this;"000"==t?u.firestore().collection("pos").where("cliente","==","").orderBy("serial","asc").onSnapshot(function(t){var a=[];t.forEach(function(t){a.push({dni:t.data()["serial"],nombres:t.data()["agencia"],cuenta:t.data()["fecha"]})}),e.lista=a}):u.firestore().collection("pos").where("agencia","==",t).where("cliente","==","").orderBy("serial","asc").onSnapshot(function(t){var a=[];t.forEach(function(t){a.push({dni:t.data()["serial"],nombres:t.data()["agencia"],cuenta:t.data()["fecha"]})}),e.lista=a})},cargarDNI:function(){if(""!=this.dni&&this.dni.length>6){var t=this;this.lista=[],f.a.post(t.$root.$ls.get("IP")+"/vendemas/consultacuentas",{sDNI:t.dni}).then(function(e){e.data.forEach(function(e){t.lista.push({dni:e["sDNI"],nombres:e["sNombres"],cuenta:e["sCuenta"]+" - "+e["sNomProducto"]})}),t.lista.length<1&&(t.showModal=!0)}).catch()}},listaAgencias:function(t){var e=this;u.firestore().collection("agencias").where("agencia","==",t).get().then(function(t){var a=[];t.forEach(function(t){a.push(t.data())}),e.Agencias=a}).catch()},Agregar:function(){var t=this;"dni"===this.consulta?this.cargarDNI():this.cargarPOS(this.arrPos.agencia),this.show=!1,this.$nextTick(function(){t.show=!0})},Eliminar:function(t){confirm("Seguro de eliminar el Serial \n"+t["serial"])},writeUserData:function(t,e,a,o){u.firestore().collection("users").add({username:e,email:a,profile_picture:o})}}},L=B,q=(a("5f73"),Object(C["a"])(L,k,N,!1,null,"e3ac0e0a",null));q.options.__file="Consultas.vue";var H=q.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vFormPrincipal",attrs:{id:"fPrincipal"}},[a("div",{staticClass:"posDisp"},[a("h1",{staticClass:"posTitle"},[t._v("POS Disponibles")]),a("p",{staticClass:"posStock"},[t._v(" "+t._s(t.$root.$data.sstock)+" de 20 ")]),a("div",{staticClass:"set-size charts-container"},[a("div",{class:[t.size]},[a("span",{staticClass:"label"},[t._v(t._s(t.pct)),a("span",{staticClass:"smaller"},[t._v("%")])])])])]),a("div",{staticClass:"posItem"},[a("h3",{staticClass:"posItemTitle"},[t._v("Precio de dispositivo:")]),a("h4",{staticClass:"posItemPrecio"},[t._v(t._s(t.precio)+" soles")]),t._m(0)])])},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"itmPrincipal"},[t._v("\n            Requisitos: "),a("br"),t._v("\n              1. Tener cuenta de ahorros."),a("br"),t._v("\n              2. Abonar concepto POS Vende+"),a("br"),t._v("\n              3. Acercarse para afiliar el servicio."),a("br")])}],G=u.firestore(),J={timestampsInSnapshots:!0};G.settings(J);var X=G.collection("voucher"),U={name:"Principal",data:function(){return{msg:"Stock de POS",precio:169,datos:[],show:!1}},beforeCreate:function(){var t=this;f.a.post(this.$root.$ls.get("IP")+"/vendemas/listavoucher").then(function(t){t.data.forEach(function(t){X.where("sNumTRX","==",t["sNumTRX"]).get().then(function(e){e.size<1&&X.add(t)}).catch()})}).catch(function(e){t.errors.push(e)})},mounted:function(){},computed:{pct:function(){return Math.round(1*this.$root.$data.sstock/20*100)},size:function(){return"pie-wrapper pie-wrapper--solid progress-"+this.pct},dniValidado:function(){return this.form.dni+"00"},stock1:function(){return this.$root.$data.sstock}},methods:{onSubmit:function(){alert("todo OK")}}},Y=U,Z=(a("e30f"),a("c57d"),Object(C["a"])(Y,K,F,!1,null,"21e13f7c",null));Z.options.__file="Principal.vue";var W=Z.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vPOS"},[a("form",{staticClass:"formPOS",on:{submit:function(e){return e.preventDefault(),t.Agregar(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Número de Serie POS")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.arrPos.serial,expression:"arrPos.serial"}],ref:"serial",staticClass:"form-control serialPOS",attrs:{placeholder:"Número de Serie",type:"text"},domProps:{value:t.arrPos.serial},on:{input:function(e){e.target.composing||t.$set(t.arrPos,"serial",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Sucursal")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sucursal,expression:"sucursal"}],staticClass:"form-control",attrs:{disabled:t.isDisabled},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.sucursal=e.target.multiple?a:a[0]},t.Cambiar]}},[a("option",{attrs:{selected:"",value:"000"}},[t._v("Elija la agencia")]),t._l(t.Agencias,function(e){return a("option",{key:e.nom_ofi,domProps:{value:e.cod_ofi}},[t._v(t._s(e.cod_ofi)+" - "+t._s(e.nom_ofi))])})],2)]),a("input",{staticClass:"btn btn-success btnAgregar",attrs:{type:"submit",value:"Agregar"}})]),a("div",{staticClass:"card listaTabla"},[t._m(0),a("div",{staticClass:"card-body"},[a("table",{staticClass:"table table-strip"},[t._m(1),a("tbody",t._l(t.POS,function(e,o,s){return a("tr",{key:s,attrs:{index:o}},[a("td",[t._v("\n                          "+t._s(e.serial)+"\n                      ")]),a("td",[t._v("\n                          "+t._s(e.agencia)+"\n                      ")]),a("td",[t._v("\n                          "+t._s(e.fecha)+"\n                      ")]),a("td",[a("button",{on:{click:function(a){a.preventDefault(),t.Eliminar(e)}}},[t._v(" Eliminar")])])])}))])])])])},tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[t._v("Listado de POS")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Serie")]),a("th",[t._v("Agencia")]),a("th",[t._v("Fec.Registro")]),a("th",[t._v("Acciones")])])])}],et=u.database(),at=et.ref("pos").equalTo("agencia","060"),ot=u.firestore(),st={timestampsInSnapshots:!0};ot.settings(st);var nt=ot.collection("agencias"),it=ot.collection("pos"),rt={name:"Pos",todo:"",firebase:{lista:at},firestore:{lstAgencias:nt,lstPos:it},mounted:function(){var t=this;u.firestore().collection("agencias").where("estado","==",!0).get().then(function(e){var a=[];e.forEach(function(t){a.push(t.data())}),t.Agencias=a}).catch(),this.listaAgencias(this.$root.$data.codAgencia)},data:function(){return{isDisabled:!1,arrPos:{serial:"2703280103000",agencia:"",nomagencia:"",cliente:"",fecha:"",estado:""},sucursal:this.$root.$data.codAgencia,Agencias:[],POS:[],listado02:at,lstAgencias:nt,msg:"Gmail.com"}},methods:{listaAgencias:function(t){var e=this;t=this.$root.$data.codAgencia,u.firestore().collection("pos").where("agencia","==",t).orderBy("serial","asc").onSnapshot(function(t){var a=[];t.forEach(function(t){a.push(t.data())}),e.POS=a,e.isDisabled=!0})},Agregar:function(){var t=this,e=new Date;this.arrPos.agencia=this.sucursal,this.arrPos.fecha=e.toISOString().replace(/-/g,"").split("T")[0],it.add(this.arrPos),this.arrPos.serial="2703280103000",this.arrPos.nomagencia="",this.arrPos.cliente="",this.arrPos.fecha="",this.show=!1,this.$nextTick(function(){t.show=!0})},Eliminar:function(t){var e=confirm("Seguro de eliminar el Serial \n"+t["serial"]);e&&u.firestore().collection("pos").where("serial","==",t["serial"]).get().then(function(t){t.forEach(function(t){t.ref.delete()})}).catch()},Cambiar:function(){this.listaAgencias(this.sucursal)},writeUserData:function(t,e,a,o){u.firestore().collection("users").add({username:e,email:a,profile_picture:o})}}},ct=rt,lt=(a("f261"),Object(C["a"])(ct,Q,tt,!1,null,"74f7f82c",null));lt.options.__file="Pos.vue";var ut=lt.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"piepagina"},[a("a",{staticClass:"opcion",attrs:{href:"http://www.credinka.com",target:"_blank"}},[t._v(t._s(t.msg))]),t._m(0)])},ft=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"opcion2"},[a("small",[t._v("© 2018 FINANCIERA CREDINKA. Todos los derechos reservados")])])}],pt={name:"Piepagina",data:function(){return{msg:"Credinka.com"}}},ht=pt,mt=(a("cb33"),Object(C["a"])(ht,dt,ft,!1,null,"0b61a35b",null));mt.options.__file="Footer.vue";var vt=mt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vFormAfiliacion"},[t.autorizado?a("div",{attrs:{id:"sellos"}},[t._m(0),a("div",[a("b-form",{staticClass:"vFormAfilia",on:{submit:t.onSubmit,reset:t.onReset}},[a("div",[a("div",[a("b-form-group",{attrs:{horizontal:"",id:"dniInputGroup1",label:"DNI:","label-for":"dniInput1"}},[a("b-form-input",{ref:"dni",staticClass:"form-control1 form-dni",attrs:{id:"dniInput1",type:"text",maxlength:"8",state:!t.$v.form.dni.$invalid,required:"",placeholder:"Ingrese DNI(########)",pattern:"[0-9]*"},nativeOn:{keydown:function(e){return t.validaNum2(e)},keypress:function(e){return t.validaNum(e)},blur:function(e){t.cargarDNI()}},model:{value:t.form.dni,callback:function(e){t.$set(t.form,"dni",e)},expression:"form.dni"}}),a("label",{staticClass:"sNombreAfilia"},[t._v(t._s(t.form.name))])],1),a("b-form-group",{attrs:{horizontal:"",id:"inputGroup4",label:"Número de Cuenta:","label-for":"nroCuentaInput"}},[a("b-form-select",{staticClass:"mb-3 form-select1",attrs:{id:"nroCuentaInput",options:t.cuentas,required:""},model:{value:t.form.cuentas,callback:function(e){t.$set(t.form,"cuentas",e)},expression:"form.cuentas"}})],1),a("b-form-group",{attrs:{horizontal:"",id:"seriePOSInputGroup",label:"Serie de POS:","label-for":"seriePOSInput"}},[a("b-form-select",{staticClass:"mb-3 form-select1",attrs:{id:"seriePOSInput",options:t.posDisponible,required:""},model:{value:t.form.seriepos,callback:function(e){t.$set(t.form,"seriepos",e)},expression:"form.seriepos"}})],1),a("b-form-group",{attrs:{horizontal:"",id:"nroTicketInputGroup",label:"Número de Ticket/Voucher:","label-for":"nroTicketInput"}},[a("b-form-select",{staticClass:"mb-3 form-select1",attrs:{id:"nroTicketInput",options:t.voucherDisponible,required:""},model:{value:t.form.voucher,callback:function(e){t.$set(t.form,"voucher",e)},expression:"form.voucher"}})],1),a("b-form-group",{attrs:{horizontal:"",id:"inputGroup3",label:"Número de Crédito:","label-for":"nroCreditoInput"}},[a("b-form-input",{staticClass:"form-control1",attrs:{id:"nroCreditoInput",type:"text",maxlength:"12",placeholder:"Ingrese número crédito"},nativeOn:{keydown:function(e){return t.validaNum2(e)},keypress:function(e){return t.validaNum(e)},blur:function(e){return t.cargarNumCredito(e)}},model:{value:t.form.credito,callback:function(e){t.$set(t.form,"credito",e)},expression:"form.credito"}})],1)],1)]),a("div",{staticClass:"row btnAfiliacion"},[a("div",{staticClass:"col-md-6"},[a("b-button",{staticClass:"mx-auto bg-info",attrs:{type:"submit",variant:"primary"}},[t._v("Enviar")])],1),a("div",{staticClass:"col-md-6 centered"},[a("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Limpiar")])],1)]),a("div",[a("a",{staticClass:"completarReg",attrs:{href:this.$root.$ls.get("VendeMas"),target:"_blank"}},[t._v(" \n            Completar afiliación en VENDEMAS")])])])],1)]):a("div",[a("p",[t._v("No esta autorizado. Por favor, inicie sesión.")])])])},bt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"AfiliacionTitle"},[t._v("Registro de "),a("span",[t._v("POS")])])}],_t=a("1dce"),Ct=a("b5ae"),$t=u.firestore(),Pt={timestampsInSnapshots:!0};$t.settings(Pt);var St=$t.collection("voucher"),yt=$t.collection("cliente"),wt={name:"Afiliacion",firestore:{lstVoucher:St,lstCliente:yt},data:function(){return{completado:!1,datos:[],form:{dni:"",name:"",credito:"",voucher:"",seriepos:"",cuentas:""},cuentas:[{text:"Elija la cuenta",value:null}],posDisponible:[],voucherDisponible:[],show:this.$store.state.auth,dni:null,agencia:this.$root.$data.codAgencia,lstVoucher:St,lstCliente:yt}},mixins:[_t["validationMixin"]],validations:{form:{credito:{required:Ct["required"]},dni:{required:Ct["required"],minLength:Object(Ct["minLength"])(7)}}},computed:{dniValidado:function(){return this.form.dni+"00"},autorizado:function(){return this.$store.state.auth}},methods:{validaNum2:function(t){var e=t.keyCode||t.charCode;if(190!=e&&222!=e||(t.preventDefault(!0),t.stopPropagation(!0),t.stopped=!0),!t.defaultPrevented){var a=!1;void 0!==t.key||void 0!==t.keyIdentifier||t.keyCode,a&&t.preventDefault()}},validaNum:function(t){var e=t.keyCode||t.charCode;switch(e){case 46:case 13:case 8:case 35:case 36:case 37:case 38:case 39:case 40:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:break;default:t.preventDefault(),t.stopPropagation(),t.stopped=!0;break}},updPOS:function(t){var e=this;u.firestore().collection("pos").where("serial","==",t).get().then(function(t){t.forEach(function(t){t.ref.update({cliente:e.form.dni})})}).catch()},updVoucher:function(t){u.firestore().collection("voucher").where("sNumTRX","==",t).get().then(function(t){t.forEach(function(t){t.ref.update({disponible:0})})}).catch()},cargarNumCredito:function(){var t=this;""!=this.form.dni&&f.a.post(t.$root.$ls.get("IP")+"/vendemas/validancredito",{sDNI:this.form.dni,sNumeroCredito:this.form.credito}).then(function(e){t.form.name=e.data["sNombres"],t.cargarCuentas(),t.cargarPOS(),t.cargarVoucher()}).catch()},cargarDNI:function(){var t=this;""!=this.form.dni&&f.a.post(t.$root.$ls.get("IP")+"/vendemas/consultadni",{sDNI:this.form.dni}).then(function(e){t.form.name=e.data["sNombres"],t.cargarCuentas(),t.cargarPOS(),t.cargarVoucher()}).catch()},cargarCuentas:function(){var t=this;f.a.post(t.$root.$ls.get("IP")+"/vendemas/consultacuentas",{sDNI:this.form.dni}).then(function(e){var a=[];e.data.forEach(function(t){a.push({text:t["sCuenta"],value:t["sCuenta"]})}),t.cuentas=a}).catch()},cargarPOS:function(){var t=this;u.firestore().collection("pos").where("agencia","==",this.agencia).where("cliente","==","").orderBy("serial","asc").get().then(function(e){var a=[];e.forEach(function(t){a.push({text:t.data()["serial"],value:t.data()["serial"]})}),t.posDisponible=a}).catch({})},cargarVoucher:function(){var t=this;u.firestore().collection("voucher").where("disponible","==",1).orderBy("sNumTRX","asc").get().then(function(e){var a=[];e.forEach(function(t){a.push({text:t.data()["sNumTRX"],value:t.data()["sNumTRX"]})}),t.voucherDisponible=a}).catch()},onSubmit:function(t){t.preventDefault(),yt.add(this.form),this.updVoucher(this.form.voucher),this.updPOS(this.form.seriepos),alert("Afiliacion completada"),window.open(this.$root.$ls.get("VendeMas"),"_blank"),this.clearAfiliacion(t),this.completado=!0},clearAfiliacion:function(t){var e=this;t.preventDefault(),this.completado=!1,this.form.dni="",this.form.name="",this.form.seriepos="",this.form.voucher="",this.form.cuentas=[],this.form.credito="",this.form.posDisponible=[],this.form.voucherDisponible=[],this.show=!1,this.$nextTick(function(){e.show=!0}),this.$refs.dni.$el.focus()},onReset:function(t){this.clearAfiliacion(t)}}},It=wt,At=(a("b34c"),Object(C["a"])(It,gt,bt,!1,null,"ee79debc",null));At.options.__file="Afiliacion.vue";var kt=At.exports,Nt=a("2f62"),Et=(a("f9e3"),a("2dd8"),{components:{Cabecera:A,Principal:W,Piepagina:vt,Pos:ut,Afiliacion:kt,Consultas:H,modal:T},props:{mostrar:Boolean},name:"app",mounted:function(){var t=this,e=document.getElementById("app0");e.addEventListener("mouseover",function(){t.$refs.cabecera.$refs.counterComp&&t.$refs.cabecera.$refs.counterComp.setHora()});var a=this;this.auth.onAuthStateChanged(function(t){if(t){a.$store.state.auth=!0,a.usuarioActivo=t;var e=t.email;a.$sEmail=e;var o=e.split("@");"gmail.com"!=o[1]?(a.infoNoConectado="Por favor utilice las credenciales correctas.",a.fb.auth().signOut(),a.$router.push({path:"/"})):(f.a.post(a.$root.$ls.get("IP")+"/vendemas/listausuario",{sEmail:t.email}).then(function(e){e.data.forEach(function(e){a.$nomPerfil=e["nomPerfil"],a.$codAgencia=e["codOficina"],a.$nomAgencia=e["nomOficina"],a.$root.$data.codAgencia=e["codOficina"],u.firestore().collection("pos").where("agencia","==",e["codOficina"]).where("cliente","==","").onSnapshot(function(t){if(a.$root.$data.sstock=t.size,t.size<a.$root.$ls.get("stockMinimo")){var e=a.$root.$ls.get("sEmailBody");e=e.replace("$1",t.size.toString()),f.a.post(a.$root.$ls.get("IP")+"/wsutils/sendmail",{user:"no-reply@gmail.com",pwd:"Gmail2017",recipient:a.$root.$ls.get("sEmailMKT"),subject:"[StockMinimo POS] Agencia: "+a.$nomAgencia,body:e}).then(function(t){console.log("Email enviado.")})}}),f.a.post(a.$root.$ls.get("IP")+"/vendemas/perfilusuario",{sEmail:t.email,sProducto:"VENDEMAS"}).then(function(t){t.data.forEach(function(t){switch(t["vRuta"]){case"Principal":a.bPrincipal=!0;break;case"Afiliacion":a.bAfiliacion=!0;break;case"Consultas":a.bConsultas=!0;break;case"Inventario":a.bInventario=!0;break}})}).catch()})}).catch(),a.$router.push({path:"/"})),a.displayName=t.displayName,a.photo=t.photoURL}else a.$store.state.auth=!1,a.usuarioActivo=null,a.$router.push({path:"/"})})},computed:{conectado:function(){return this.$store.state.auth?this.displayName:"Invitado."},conectadoPhoto:function(){return this.$store.state.auth?this.photo:""},autorizado:function(){return this.$store.state.auth}},data:function(){return{autenticado:!1,haCargado:!1,bPrincipal:!1,bAfiliacion:!1,bConsultas:!1,bInventario:!1,showModal:!1,infoNoConectado:"",fb:null,db:null,auth:null,config:{apiKey:"AIzaSyAZIwxTNvpHVvwkJ4o2JKS2SpYHOLBeZsg",authDomain:"vende-mas.firebaseapp.com",databaseURL:"https://vende-mas.firebaseio.com",projectId:"vende-mas",storageBucket:"vende-mas.appspot.com",messagingSenderId:"699209203300"},usuarioActivo:[],displayName:"",photo:""}},methods:Object(Nt["b"])(["cambiar"]),created:function(){this.fb=u,this.db=this.fb.database(),this.auth=this.fb.auth()}}),Ot=Et,Dt=(a("9774"),Object(C["a"])(Ot,s,n,!1,null,"96bcd72a",null));Dt.options.__file="App.vue";var xt=Dt.exports,Mt=a("8c4f"),Tt=a("5f30"),jt=a.n(Tt),Vt=[{path:"*",component:W},{path:"/",component:W},{path:"/Afiliacion",component:kt},{path:"/Consultas",component:H},{path:"/Pos",component:ut}];o["a"].use(Nt["a"]);var zt=new Nt["a"].Store({state:{auth:!0},mutations:{cambiar:function(t){return t.auth=!t.auth}}}),Rt=a("9f7b"),Bt=a("ead5"),Lt=a.n(Bt),qt=u.firestore(),Ht={timestampsInSnapshots:!0};qt.settings(Ht),o["a"].use(Lt.a,{name:"ls",bind:!0}),o["a"].use(Mt["a"]),o["a"].use(Rt["a"]),o["a"].use(jt.a);var Kt=new Mt["a"]({mode:"history",routes:Vt});Kt.beforeEach(function(t,e,a){zt.state.auth?a():"/"!=t.fullPath?a("/"):a(!0)}),o["a"].prototype.$codAgencia="",o["a"].prototype.$nomAgencia="",o["a"].prototype.$nomPerfil="",o["a"].prototype.$stock=0,o["a"].prototype.$tiempo=2,o["a"].config.productionTip=!1;var Ft=new Date,Gt=new Date(Ft.getTime()+6e4*o["a"].prototype.$tiempo),Jt=Gt.getFullYear(),Xt=Gt.getMonth(),Ut=Xt+1,Yt=Gt.getDate(),Zt=Gt.getHours(),Wt=Gt.getMinutes(),Qt=Gt.getSeconds(),te=Jt.toString()+(Ut<10?"-0":"-")+Ut+(Yt<10?"-0":"-")+Yt;te+=(Zt<10?" 0":" ")+Zt,te+=(Wt<10?":0":":")+Wt,te+=(Qt<10?":0":":")+Qt,new o["a"]({data:{sstock:0,sSesion:te.toString(),codAgencia:"",timeout:15,mostrar:!1},methods:{escapeKeyListener:function(t){t.keyCode}},beforeCreate:function(){var t=this;qt.collection("config").get().then(function(e){e.forEach(function(e){t.$ls.set("IP",e.data()["urlAPI"]),t.$ls.set("VendeMas",e.data()["urlVendeMas"]),t.$ls.set("timeout",e.data()["timeout"]),t.mostrar=!0})})},mounted:function(){var t=this;qt.collection("config").get().then(function(e){e.forEach(function(e){t.$ls.set("IP",e.data()["urlAPI"]),t.$ls.set("VendeMas",e.data()["urlVendeMas"]),t.$ls.set("timeout",e.data()["timeout"]),t.$ls.set("stockMinimo",e.data()["stockMinimo"]),t.$ls.set("sEmailMKT",e.data()["sEmailMKT"]),t.$ls.set("sEmailBody",e.data()["sEmailBody"]),t.mostrar=!0})})},created:function(){document.addEventListener("keyup",this.escapeKeyListener)},destroyed:function(){document.removeEventListener("keyup",this.escapeKeyListener)},router:Kt,store:zt,render:function(t){return t(xt)}}).$mount("#app")},"5f73":function(t,e,a){"use strict";var o=a("f2c1"),s=a.n(o);s.a},"5fbe":function(t,e,a){t.exports=a.p+"img/logo2.a0530862.png"},6674:function(t,e,a){"use strict";var o=a("82a8"),s=a.n(o);s.a},"714e":function(t,e,a){},"7ad5":function(t,e,a){},"82a8":function(t,e,a){},9564:function(t,e,a){},9774:function(t,e,a){"use strict";var o=a("cf6a"),s=a.n(o);s.a},b34c:function(t,e,a){"use strict";var o=a("3ee6"),s=a.n(o);s.a},bba8:function(t,e,a){},c57d:function(t,e,a){"use strict";var o=a("bba8"),s=a.n(o);s.a},cb33:function(t,e,a){"use strict";var o=a("714e"),s=a.n(o);s.a},cf6a:function(t,e,a){},e141:function(t,e,a){"use strict";var o=a("9564"),s=a.n(o);s.a},e30f:function(t,e,a){"use strict";var o=a("7ad5"),s=a.n(o);s.a},e791:function(t,e,a){"use strict";var o=a("2a7e"),s=a.n(o);s.a},f261:function(t,e,a){"use strict";var o=a("f738"),s=a.n(o);s.a},f2c1:function(t,e,a){},f738:function(t,e,a){}});
//# sourceMappingURL=app.f630e052.js.map